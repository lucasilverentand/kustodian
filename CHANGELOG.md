# Changelog

## [2.0.0](https://github.com/lucasilverentand/kustodian/compare/kustodian-v1.0.0...kustodian-v2.0.0) (2026-02-05)


### âš  BREAKING CHANGES

* Package renamed from @kustodian/cli to kustodian. All internal packages now accessed via subpath exports (e.g. kustodian/core). Plugins renamed from @kustodian/plugin-X to kustodian-X.
* The `enabled` field has been removed from template configuration. Templates are now deployed using an opt-in model: only templates explicitly listed in cluster.yaml will be deployed.

### Features

* **actions:** add reusable GitHub Actions for validate and deploy ([7b9f626](https://github.com/lucasilverentand/kustodian/commit/7b9f6263607ae266d23414e3250a28e55479318f))
* add CEL expression support for health checks ([8264854](https://github.com/lucasilverentand/kustodian/commit/8264854ec9d9d8b3a987827304b57e8e03d368b6))
* add CEL expression support for health checks ([f231bdc](https://github.com/lucasilverentand/kustodian/commit/f231bdc496f2f0db54094106f8d045d960c2390a)), closes [#104](https://github.com/lucasilverentand/kustodian/issues/104)
* address multiple open issues ([#101](https://github.com/lucasilverentand/kustodian/issues/101), [#103](https://github.com/lucasilverentand/kustodian/issues/103), [#106](https://github.com/lucasilverentand/kustodian/issues/106)) ([ebb248b](https://github.com/lucasilverentand/kustodian/commit/ebb248b285dc8ee29764836ddd8be5be5821983c))
* **ci:** add Kubernetes integration test workflows ([76d1f94](https://github.com/lucasilverentand/kustodian/commit/76d1f94c91d688f4023c0a040d7d6a31e2d6de50))
* **ci:** enhance CI with E2E tests, coverage, and matrix testing ([4f54428](https://github.com/lucasilverentand/kustodian/commit/4f54428e0423fd5f37f1a935913319fdde4c584a))
* **ci:** publish to both npm and GitHub Packages ([64a7110](https://github.com/lucasilverentand/kustodian/commit/64a7110622b84f5f257eb11b64ba83f6943fec64))
* **cli:** add command implementations ([d34d9a8](https://github.com/lucasilverentand/kustodian/commit/d34d9a896ea78c7f10bf463d35487d7906435a96))
* **cli:** add comprehensive nginx template to init command ([6e3e48c](https://github.com/lucasilverentand/kustodian/commit/6e3e48c315fecaebcddab3ff25e587e2e41dac68))
* **cli:** add Doppler token bootstrap to apply command ([a4b61e7](https://github.com/lucasilverentand/kustodian/commit/a4b61e7318d1a8eed4882a723d716c26a5144e32))
* **cli:** add middleware system for CLI operations ([a05bd1a](https://github.com/lucasilverentand/kustodian/commit/a05bd1af7b8e7fff6ad553fcf984033865a26b52)), closes [#49](https://github.com/lucasilverentand/kustodian/issues/49)
* **cli:** complete apply command with OCI push and Flux deployment ([a58ecf1](https://github.com/lucasilverentand/kustodian/commit/a58ecf19023dfccfe047a52a2eae622af83fe462))
* **cli:** improve cluster bootstrap stability ([54e2872](https://github.com/lucasilverentand/kustodian/commit/54e28728839dd06d1a778443bfa3fc61556ab10e))
* **cli:** simplify apply to generate in-memory and remove push command ([d8d991b](https://github.com/lucasilverentand/kustodian/commit/d8d991b363d3fe7594864206390b587575fcd8a8))
* consolidate all @kustodian/* packages into single kustodian package ([8a10b17](https://github.com/lucasilverentand/kustodian/commit/8a10b17471b43c5fcc8d04ab36510fa582355654))
* **e2e:** add comprehensive e2e test suite ([fef3162](https://github.com/lucasilverentand/kustodian/commit/fef3162f8ae0fb884ea02176a2eecbbdd0a45931))
* **generator:** add cross-template dependency support in Flux generation ([baeaaa8](https://github.com/lucasilverentand/kustodian/commit/baeaaa86b48b83ca79a574cc4ba7651d16f81c5a)), closes [#45](https://github.com/lucasilverentand/kustodian/issues/45)
* **generator:** add dependency graph validation with cycle detection ([7b89c04](https://github.com/lucasilverentand/kustodian/commit/7b89c04cbd0cc91d50c1c09a9a52f56b17152da4))
* **generator:** add dependency graph validation with cycle detection ([5d5f05a](https://github.com/lucasilverentand/kustodian/commit/5d5f05a3a27fcc74bcd2c1270d5b6cf7649695c0)), closes [#41](https://github.com/lucasilverentand/kustodian/issues/41)
* **generator:** add flux controller parallelization config ([bb1406a](https://github.com/lucasilverentand/kustodian/commit/bb1406ab19bf653db59a2bb17991916a3cb39562))
* **generator:** add plugin hooks, substitution engine, and output writer ([bf2f7a5](https://github.com/lucasilverentand/kustodian/commit/bf2f7a5da91314f7acc58aec1241fe2c422d3591))
* **generator:** add smart enable/disable system for kustomizations ([b581b5c](https://github.com/lucasilverentand/kustodian/commit/b581b5c7bedc348bc7c7399cc75ecc4897bbec84)), closes [#109](https://github.com/lucasilverentand/kustodian/issues/109)
* **generator:** add structured directory output for Flux kustomizations ([34d19bf](https://github.com/lucasilverentand/kustodian/commit/34d19bf65cfa154073af07fc86f520ded17f8a1f)), closes [#47](https://github.com/lucasilverentand/kustodian/issues/47)
* implement monorepo structure with core packages ([b4b0aef](https://github.com/lucasilverentand/kustodian/commit/b4b0aefe7d723eac5484572fc0207f1821b7c114))
* **k0s:** integrate kubectl labeler for node label management ([0549818](https://github.com/lucasilverentand/kustodian/commit/0549818ef5b1ff674ee19451b96daafe9273a059))
* **k8s:** add Kubernetes client wrappers for runtime operations ([b589c70](https://github.com/lucasilverentand/kustodian/commit/b589c70c700207d7539cff1ba4d2cbccb7442107)), closes [#48](https://github.com/lucasilverentand/kustodian/issues/48)
* migrate to OCI-based deployments and remove bootstrap package ([cb6dbb4](https://github.com/lucasilverentand/kustodian/commit/cb6dbb47123a08fdc2a0227cdbf6664a73dc4d57))
* **nodes:** add kubectl-based node labeler implementation ([0c9c11d](https://github.com/lucasilverentand/kustodian/commit/0c9c11d10cae165e1e66646d10c3a0f4564f35a2))
* **nodes:** add reusable node profiles ([cf75609](https://github.com/lucasilverentand/kustodian/commit/cf756091563f602ea2fcffa0275fb7400937ee8f)), closes [#43](https://github.com/lucasilverentand/kustodian/issues/43)
* **phase2:** Complete Generator Validation with comprehensive test fixtures ([#122](https://github.com/lucasilverentand/kustodian/issues/122)) ([6afa349](https://github.com/lucasilverentand/kustodian/commit/6afa34971a2d86f308287f6972f5033571d128a2))
* **plugin-k0s:** add k0s cluster provider plugin ([917e815](https://github.com/lucasilverentand/kustodian/commit/917e8155cdce79272370d17869b3d6fd0974f70e))
* **plugins, generator, schema:** add substitution provider plugin system ([1440de4](https://github.com/lucasilverentand/kustodian/commit/1440de41a2b0b426bd8bb19911924757dbd744f9))
* **plugins:** add 1Password and Doppler secret provider plugins ([98257a5](https://github.com/lucasilverentand/kustodian/commit/98257a5d4037a40ddb54864f043e7b663637875b))
* **plugins:** add Authelia authentication provider plugin ([0c8178b](https://github.com/lucasilverentand/kustodian/commit/0c8178beda6b9a122c17485f43e4707b1f82758c))
* **plugins:** add Authentik authentication provider plugin ([#119](https://github.com/lucasilverentand/kustodian/issues/119)) ([346df7e](https://github.com/lucasilverentand/kustodian/commit/346df7e715f21d525b921b5afd3e6fe9495cd1ac))
* **plugins:** redesign plugin system with commands, hooks, generators, and object types ([a30ae17](https://github.com/lucasilverentand/kustodian/commit/a30ae1761ffb80107ca14d349cb3ab9517172b13))
* **registry:** add typed substitution system with automatic version updates ([0df7131](https://github.com/lucasilverentand/kustodian/commit/0df71312ef3715a6032e2cecf8f39065efe4f9cf)), closes [#42](https://github.com/lucasilverentand/kustodian/issues/42)
* remove deprecated enabled field from templates ([#124](https://github.com/lucasilverentand/kustodian/issues/124)) ([ba1f60f](https://github.com/lucasilverentand/kustodian/commit/ba1f60f1c8c8e19ba20fbbf6af1301547a93f7f0))
* **schema, cli, generator, loader:** implement three-tier cascading defaults system ([1eaa017](https://github.com/lucasilverentand/kustodian/commit/1eaa01786930b8093ada349910eda46998fb54bb))
* **schema, cli, generator:** add configurable defaults for Flux namespace and OCI secret name ([#129](https://github.com/lucasilverentand/kustodian/issues/129)) ([cb0a58a](https://github.com/lucasilverentand/kustodian/commit/cb0a58a10814ceaba5c1c3e499d3d42fadbf4dd7)), closes [#127](https://github.com/lucasilverentand/kustodian/issues/127)
* **schema, cli:** support annotations on cluster secret ([3334094](https://github.com/lucasilverentand/kustodian/commit/3334094ebf7b0bb8b8eed48839f52181ef7f837f))
* **schema:** add cluster code and github metadata fields ([002911d](https://github.com/lucasilverentand/kustodian/commit/002911dfc9abe04728f0719f6cbd073f7efefa55)), closes [#46](https://github.com/lucasilverentand/kustodian/issues/46)
* **schema:** add JSON schema generation and export capabilities ([5322845](https://github.com/lucasilverentand/kustodian/commit/53228457e25c4a938513ee06e749a950f6eec6f0))
* **schema:** add native spec.versions support for template-level version tracking ([7114eea](https://github.com/lucasilverentand/kustodian/commit/7114eea718bf7ddb4378f4178797556e34d22a0c))
* **schema:** remove unused domain field from cluster specification ([67ae970](https://github.com/lucasilverentand/kustodian/commit/67ae97035bab570735cf305c4a47564cca97edf4))
* **secrets:** add cluster-level secret provider configuration ([#116](https://github.com/lucasilverentand/kustodian/issues/116)) ([b7d3d19](https://github.com/lucasilverentand/kustodian/commit/b7d3d19eddf3a46b522fe919954e36dc91aed9a6))
* **sources:** add template sources system for remote fetching ([e8284d6](https://github.com/lucasilverentand/kustodian/commit/e8284d6b0c194a82e22387ae4293f66af35e6883))
* **sources:** export cache metadata schema for external validation ([6485dcc](https://github.com/lucasilverentand/kustodian/commit/6485dcc5e2e4bccc8b48d6752a319796b6b4d7db))
* support Helm chart versions in version substitutions ([#118](https://github.com/lucasilverentand/kustodian/issues/118)) ([5201da4](https://github.com/lucasilverentand/kustodian/commit/5201da4f5f0bbcfb8a5e7bbf952cccfbc9f36a7b)), closes [#102](https://github.com/lucasilverentand/kustodian/issues/102)
* support raw Flux Kustomization dependency references ([#117](https://github.com/lucasilverentand/kustodian/issues/117)) ([959906e](https://github.com/lucasilverentand/kustodian/commit/959906e596a345c0dd69b2a7bc91aac40c0ccdb5))
* **templates:** add node label requirement validation ([07fac3a](https://github.com/lucasilverentand/kustodian/commit/07fac3a7e458fe4f14d57fd65c2b14674d56b59a)), closes [#105](https://github.com/lucasilverentand/kustodian/issues/105)


### Bug Fixes

* apply Biome formatting to resolve lint errors ([d1cc63d](https://github.com/lucasilverentand/kustodian/commit/d1cc63d43e8b4165b44dc56379b7a5dd551398b8))
* CI fixes and remove silverswarm test fixtures ([67b57e9](https://github.com/lucasilverentand/kustodian/commit/67b57e9af9d57c754eceb784d1af52eadd8cba7c))
* **ci:** add build step for project references and fix duplicate env block ([0d7493a](https://github.com/lucasilverentand/kustodian/commit/0d7493afc2c00bf9a6c373e3c3311f57dd4b1186))
* **ci:** build all packages before npm publish ([7fef38a](https://github.com/lucasilverentand/kustodian/commit/7fef38a96df005b430f7f7a3af9220813a3a112e))
* **ci:** explicitly set npm registry to override publishConfig ([6e508eb](https://github.com/lucasilverentand/kustodian/commit/6e508eba0a99c595322226278c6c7c34f601fa99))
* **ci:** install k0sctl from GitHub releases instead of k0s script ([4ddf716](https://github.com/lucasilverentand/kustodian/commit/4ddf716dee1676d1d7afafc2b542e8793a5e261d))
* **ci:** remove build step (packages publish TS source directly) ([7dbd577](https://github.com/lucasilverentand/kustodian/commit/7dbd577dc2c8fa4ff7f1a1599f64a410ce3ebc05))
* **ci:** remove frozen-lockfile and add manual publish trigger ([05f386a](https://github.com/lucasilverentand/kustodian/commit/05f386a055127276936efbd9bdb25827610ae7a1))
* **ci:** remove non-existent build steps from CI workflow ([97e63de](https://github.com/lucasilverentand/kustodian/commit/97e63de13c804df86d152141590733cbf53261da))
* **ci:** remove workload test from k0s e2e due to cgroupv2 issues ([acac7e7](https://github.com/lucasilverentand/kustodian/commit/acac7e7baac6eda68c535131613e5b7ac15c490b))
* **ci:** sequential build order and module resolution ([86403ec](https://github.com/lucasilverentand/kustodian/commit/86403ec439280174b2422544d04ba9fc6e14caa4))
* **e2e:** change imports from dist/ to src/ for CI compatibility ([86e0479](https://github.com/lucasilverentand/kustodian/commit/86e0479d9dcf856c36edab57f9c25350b93a2140))
* **e2e:** skip apply dry-run test when no kubectl cluster is available ([5e5a657](https://github.com/lucasilverentand/kustodian/commit/5e5a657a8c61e5f87472e71cbbe63d247fd8ceff))
* **generator:** add namespace to substitution values ([ba304f3](https://github.com/lucasilverentand/kustodian/commit/ba304f32947de924d698e49c993050d5701219ef))
* **release:** use bun publish to resolve workspace:* dependencies ([15262d6](https://github.com/lucasilverentand/kustodian/commit/15262d61d13d3b2e36dd707d5e7e61f01c3d8dbc))
* **release:** use bun publish to resolve workspace:* dependencies ([7919b4f](https://github.com/lucasilverentand/kustodian/commit/7919b4fefb2d39b884e747553c1903217abe6a02))
* **release:** use NPM_CONFIG_TOKEN env var for bun publish authentication ([e0e3558](https://github.com/lucasilverentand/kustodian/commit/e0e35583526593c8b2fdb8044fa7ba8802f5e621))
* resolve CI failures with type errors, lint issues, and test timeouts ([dbd2b20](https://github.com/lucasilverentand/kustodian/commit/dbd2b20eb0b0c67649085880e91d1f914c4469a3))
* resolve linting and type errors in CEL health checks ([ec93de6](https://github.com/lucasilverentand/kustodian/commit/ec93de69230c9a1ff1faefce471d9e14974565c3))
* **test:** prevent E2E test timeout and optimize git hooks ([f08e36a](https://github.com/lucasilverentand/kustodian/commit/f08e36a4436429c2790a1b345e4e0a5de14bf97e))
